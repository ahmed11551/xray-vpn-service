# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Xray VLESS + Reality —Å–µ—Ä–≤–∏—Å–∞

## üéØ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ–¥–∞–∂–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –±–∞–∑–µ Xray —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ VLESS + Reality.

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **Xray Manager Service** (–ü–æ—Ä—Ç 8000)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Xray —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è VLESS + Reality –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ SNI –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –º–æ–±–∏–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 2. **Telegram Bot Service** (–ü–æ—Ä—Ç 8001)
- ‚úÖ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ 1 –¥–µ–Ω—å
- ‚úÖ –õ–∏–º–∏—Ç—ã –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º (1-3 –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ (10% –æ—Ç –ø—Ä–æ–¥–∞–∂)

#### 3. **Payment Service** (–ü–æ—Ä—Ç 8002)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YooKassa
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Robokassa
- ‚úÖ –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ (BTC, ETH, USDT)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

#### 4. **Infrastructure**
- ‚úÖ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Nginx Load Balancer
- ‚úÖ Prometheus + Grafana –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ ELK Stack –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 5. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SNI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Reality –∫–ª—é—á–µ–π
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Ubuntu 20.04+ –∏–ª–∏ CentOS 8+
- Docker –∏ Docker Compose
- –ú–∏–Ω–∏–º—É–º 4GB RAM, 2 CPU, 50GB SSD
- –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã: 80, 443, 8080, 8000, 8001, 8002, 5432, 6379

### –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt install -y git curl wget jq python3 python3-pip
```

#### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url> /opt/xray-service
cd /opt/xray-service

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
sudo chown -R $USER:$USER /opt/xray-service
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
# Telegram Bot
BOT_TOKEN=your_bot_token_here
WEBHOOK_URL=https://your-domain.com
WEBHOOK_SECRET=your_webhook_secret

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_PASSWORD=your_secure_password_here

# –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
YOOKASSA_WEBHOOK_SECRET=your_webhook_secret

ROBOKASSA_MERCHANT_LOGIN=your_merchant_login
ROBOKASSA_PASSWORD_1=your_password_1
ROBOKASSA_PASSWORD_2=your_password_2

# –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏
BITCOIN_WALLET_ADDRESS=your_btc_address
ETHEREUM_WALLET_ADDRESS=your_eth_address
USDT_TRC20_WALLET_ADDRESS=your_usdt_address

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
GRAFANA_PASSWORD=your_grafana_password
TELEGRAM_BOT_TOKEN=your_monitoring_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

#### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Xray
```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ Xray
wget -O xray.zip https://github.com/XTLS/Xray-core/releases/latest/download/Xray-linux-64.zip
unzip xray.zip
sudo mv xray /usr/local/bin/
sudo chmod +x /usr/local/bin/xray

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
xray --version
```

#### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Reality –∫–ª—é—á–µ–π
python3 scripts/generate-reality-keys.py

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python3 scripts/init-database.py
```

#### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install certbot

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certonly --standalone -d your-domain.com

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo cp /etc/letsencrypt/live/your-domain.com/fullchain.pem nginx/ssl/cert.pem
sudo cp /etc/letsencrypt/live/your-domain.com/privkey.pem nginx/ssl/key.pem
sudo chown $USER:$USER nginx/ssl/*
```

#### 7. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
```

#### 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
curl -X POST "https://api.telegram.org/bot$BOT_TOKEN/setWebhook" \
    -d "url=https://your-domain.com/webhook/"
```

#### 9. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

**YooKassa:**
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ YooKassa
- –ü–æ–ª—É—á–∏—Ç–µ Shop ID –∏ Secret Key
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL: `https://your-domain.com/webhook/yookassa`

**Robokassa:**
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ Robokassa
- –ü–æ–ª—É—á–∏—Ç–µ Merchant Login –∏ –ø–∞—Ä–æ–ª–∏
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL: `https://your-domain.com/webhook/robokassa`

#### 10. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ health check'–æ–≤
curl -I https://your-domain.com/health
curl -I https://your-domain.com:8080/health
curl -I https://your-domain.com:8001/health
curl -I https://your-domain.com:8002/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl -I https://your-domain.com:8080/api/v1/servers
curl -I https://your-domain.com:8002/api/v1/stats/payments

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
curl -I https://your-domain.com:3000  # Grafana
curl -I https://your-domain.com:9090  # Prometheus
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### Grafana –¥–∞—à–±–æ—Ä–¥—ã
- URL: `https://your-domain.com:3000`
- –õ–æ–≥–∏–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `GRAFANA_PASSWORD`

### Prometheus –º–µ—Ç—Ä–∏–∫–∏
- URL: `https://your-domain.com:9090`
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ `/metrics` endpoint –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

### –ê–ª–µ—Ä—Ç—ã
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –≤ Telegram
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU, –ø–∞–º—è—Ç–∏, –¥–∏—Å–∫–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose restart

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose pull
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f [service_name]

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
docker-compose down -v
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
curl https://your-domain.com:8080/api/v1/servers

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
curl https://your-domain.com:8002/api/v1/stats/payments

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
curl https://your-domain.com:8002/api/v1/stats/subscriptions
```

### Backup
```bash
# Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker exec xray-service_postgres_1 pg_dump -U xray_user xray_service > backup_$(date +%Y%m%d).sql

# Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
tar -czf configs_backup_$(date +%Y%m%d).tar.gz xray/ nginx/
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
docker-compose config

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose down && docker-compose up -d
```

#### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker exec xray-service_postgres_1 psql -U xray_user -d xray_service -c "SELECT 1;"

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose down
docker volume rm xray-service_postgres_data
python3 scripts/init-database.py
docker-compose up -d
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å Telegram Bot
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl "https://api.telegram.org/bot$BOT_TOKEN/getWebhookInfo"

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
curl -X POST "https://api.telegram.org/bot$BOT_TOKEN/setWebhook" \
    -d "url=https://your-domain.com/webhook/"
```

#### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
curl https://your-domain.com:8002/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook'–æ–≤
curl -X POST https://your-domain.com/webhook/yookassa \
    -H "Content-Type: application/json" \
    -d '{"test": "data"}'
```

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö Xray —Å–µ—Ä–≤–µ—Ä–æ–≤
docker-compose scale xray-server=5

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Load Balancer
docker-compose restart nginx
```

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ docker-compose.yml
services:
  xray-manager:
    deploy:
      resources:
        limits:
          memory: 2G
          cpus: '1.0'
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
```bash
# UFW (Ubuntu)
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 8080/tcp
sudo ufw allow 8000/tcp
sudo ufw allow 8001/tcp
sudo ufw allow 8002/tcp
sudo ufw enable
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo crontab -e
# –î–æ–±–∞–≤–∏—Ç—å: 0 2 * * * certbot renew --quiet && docker-compose restart nginx
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –õ–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤: `docker-compose logs [service_name]`
- –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã: `journalctl -u docker`
- –õ–æ–≥–∏ Nginx: `docker-compose logs nginx`

### –ö–æ–Ω—Ç–∞–∫—Ç—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/docs/`
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞: —á–µ—Ä–µ–∑ Telegram Bot
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: Grafana –¥–∞—à–±–æ—Ä–¥—ã

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í–∞—à –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å Xray VLESS + Reality –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

**–û—Å–Ω–æ–≤–Ω—ã–µ URL:**
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: `https://your-domain.com`
- API Xray Manager: `https://your-domain.com:8080`
- Telegram Bot: `@your_bot_username`
- API Payment Service: `https://your-domain.com:8002`
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Grafana: `https://your-domain.com:3000`
- –ú–µ—Ç—Ä–∏–∫–∏ Prometheus: `https://your-domain.com:9090`

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
5. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
