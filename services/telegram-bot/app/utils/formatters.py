from typing import Optional, Dict, Any

def format_user_info(user: Optional[Dict[str, Any]]) -> str:
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ"""
    if not user:
        return "ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½"
    
    return f"""
ğŸ†” ID: {user.get('telegram_id', 'ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾')}
ğŸ‘¤ Ğ˜Ğ¼Ñ: {user.get('first_name', 'ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾')}
ğŸ“± Username: @{user.get('username', 'ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾')}
ğŸ“… Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ: {user.get('created_at', 'ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾')}
ğŸ”¹ Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²: {user.get('device_count', 0)}/{user.get('max_devices', 3)}
ğŸ”¹ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: {'âœ… ĞĞºÑ‚Ğ¸Ğ²ĞµĞ½' if user.get('is_active') else 'âŒ Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½'}
ğŸ”¹ ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼: {'âœ… Ğ”Ğ°' if user.get('is_premium') else 'âŒ ĞĞµÑ‚'}
    """
